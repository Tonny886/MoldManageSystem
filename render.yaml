services:
  - type: web
    name: mold-manage-system
    env: python
    region: singapore
    plan: free
    
    # æ„å»ºå‘½ä»¤
    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt
    
    # ä¼˜åŒ–å¯åŠ¨å‘½ä»¤
    startCommand: |
      echo "ğŸš€ å¯åŠ¨æ¨¡å…·ç®¡ç†ç³»ç»Ÿ..."
      gunicorn app:app \
        --bind 0.0.0.0:$PORT \
        --workers 1 \
        --threads 2 \
        --timeout 120 \
        --access-logfile - \
        --error-logfile - \
        --capture-output \
        --log-level info
    
    # å…³é”®ç¯å¢ƒå˜é‡ï¼ˆéæ•æ„Ÿï¼‰
    envVars:
      - key: PYTHON_VERSION
        value: 3.10.0
      - key: PLATFORM
        value: render
      - key: WAKEUP_INTERVAL
        value: "1500"
      - key: FLASK_ENV
        value: production
      - key: DEBUG
        value: "false"
    
    # å¥åº·æ£€æŸ¥ï¼ˆé˜²æ­¢ä¼‘çœ ï¼‰
    healthCheckPath: /health
    healthCheckTimeout: 30
    initialDelaySecs: 20
    
    autoDeploy: true